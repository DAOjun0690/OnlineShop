@model ProductDetailViewModel

@{
    ViewData["Title"] = "Details";
}

<h1>商品 詳細資料</h1>
<p></p>
<div>
    <div class="row">

        <div class="col-7">
            <div class="row">
                <div class="col">
                    <p class="alert-light m-0">@Html.DisplayNameFor(m => m.Name)</p>
                    <h3>@Html.DisplayFor(m => m.Name)</h3>
                </div>
                <div class="col">
                    <p class="alert-light m-0">@Html.DisplayNameFor(m => m.Status)</p>
                    <h3>@Model.Status.ToString()</h3>
                </div>
                <div class="col">
                    <p class="alert-light m-0">@Html.DisplayNameFor(m => m.CategoryName)</p>
                    <h3>@Html.DisplayFor(m => m.CategoryName)</h3>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p>價錢:</p>
                    <h6 id="price"></h6>
                </div>
            </div>
            @* 款式 *@
            <div class="row">
                <div class="col">
                    <p class="alert-light m-0">款式</p>
                    <select id="productStyles">
                        @foreach (var item in Model.ProductStylesList)
                        {
                            <option value="@item.Id" data-price="@item.Price" data-stock="@item.Stock">@item.Name</option>
                        }
                    </select>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p>庫存:</p>
                    <h6 id="stock"></h6>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <p class="alert-light m-0">@Html.DisplayNameFor(m => m.Description)</p>
                    <pre>@Html.DisplayFor(m => m.Description)</pre>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <p class="alert-light m-0">@Html.DisplayNameFor(m => m.Promotion)</p>
                    <pre>@Html.DisplayFor(m => m.Promotion)</pre>
                </div>
            </div>
        </div>
    </div>

    <hr />

    <div class="row">
        <div class="col">
            <p class="alert-light m-0">@Html.DisplayNameFor(m => m.Content)</p>
            @Html.Raw(Model.Content)
        </div>
    </div>

    <div class="row">
        <div class="col">
            @if (Model.ProductImage != null && Model.ProductImage.Any())
            {
                foreach (ProductImage image in Model.ProductImage)
                {
                    <div class="product-image">
                        <img src=@Url.Action("Download", "Picture", new { ProductId = image.ProductId, Guid = image.Guid }) height="142" alt="ring">
                    </div>
                }
            }
        </div>
    </div>
</div>


<div>
    <a asp-action="Edit" asp-route-id="@Model.ProductId">Edit</a> |
    <a asp-action="Index">Back to List</a>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            // 綁定 款式異動事件
            $('#productStyles').change(function () {
                let price = $('option:selected', this).attr('data-price');
                $('#price').text(price);

                let stock = $('option:selected', this).attr('data-stock');
                $('#stock').text(stock);
            }).change();
        });
    </script>
}